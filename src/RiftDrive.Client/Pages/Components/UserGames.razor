@inherits UserGamesComponent

@if (User == default)
{
    <span>Loading ...</span>
}
else
{
    <Card>
        <CardBody>
            <CardTitle Size="5">Games for @User.Name</CardTitle>
        </CardBody>
        <CardBody>
            <CardText>
                <TableContainer IsBordered="true" IsStriped="true">
                    <TableBody>
                        @foreach (var game in Games)
                        {
                            <TableRow>
                                <TableRowCell>@game.Name</TableRowCell>
                                <TableRowCell>
                                    <SimpleButton Clicked=@(() => { PlayGame( game.Id ); })
                                                  IsActive=@(!Busy)>
                                        Play
                                    </SimpleButton>
                                    <SimpleButton Clicked=@(async () => { await DeleteGame( game.Id ); })
                                                  IsActive=@(!Busy)>
                                        Delete
                                    </SimpleButton>
                                </TableRowCell>
                            </TableRow>
                        }
                    </TableBody>
                </TableContainer>
            </CardText>
            <SimpleButton Clicked=@ShowModal Color="Color.Primary" IsActive=@(!Busy)>Create Game</SimpleButton>
        </CardBody>
    </Card>

}

<Modal ref="ModalRef">
    <ModalBackdrop />
    <ModalContent Size="ModalSize.Small" IsCentered="true">
        <ModalHeader>
            <ModalTitle>
                <Icon Name="IconName.Edit" />
                Create Game
            </ModalTitle>
            <CloseButton Clicked=@CancelCreate />
        </ModalHeader>
        <ModalBody>
            <Field>
                <FieldLabel>Game Name</FieldLabel>
                <TextEdit Placeholder="Enter name..." bind-Text=@GameName />
            </Field>
            <Field>
                <FieldLabel>Player Name</FieldLabel>
                <TextEdit Placeholder="Enter name..." bind-Text=@PlayerName />
            </Field>
        </ModalBody>
        <ModalFooter>
            <SimpleButton Color="Color.Secondary" Clicked=@CancelCreate>Cancel</SimpleButton>
            <SimpleButton Color="Color.Primary" Clicked=@CreateGame>Create</SimpleButton>
        </ModalFooter>
    </ModalContent>
</Modal>
