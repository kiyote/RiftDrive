@page "/user/profile"
@page "/user/profile/{UserId}"
@inherits ProfilePageBase
@layout MainLayout

@if (User == default)
{
    <span>Loading ...</span>
}
else
{
<Row>
    <Column>
        <Card>
            <CardBody>
                <CardTitle Size="5">@User.Name</CardTitle>
            </CardBody>
            @if (!string.IsNullOrWhiteSpace(User.AvatarUrl))
            {
                <CardImage Source=@User.AvatarUrl Alt="Avatar Image">
                </CardImage>
            }
        <CardBody>
            <CardText>
                <TableContainer IsBordered="true" IsStriped="true">
                    <TableBody>
                        <TableRow>
                            <TableRowCell>User Id:</TableRowCell>
                        </TableRow>
                        <TableRow>
                            <TableRowCell>@User.Id.Value</TableRowCell>
                        </TableRow>
                        <TableRow>
                            <TableRowCell>Last Login:</TableRowCell>
                        </TableRow>
                        <TableRow>
                            <TableRowCell>@FormatDate(User.LastLogin)</TableRowCell>
                        </TableRow>
                    </TableBody>
                </TableContainer>
            </CardText>
            @if(IsTheAuthenticatedUser)
            {
                if (ChangingAvatar)
                {
                    <input type="file" onchange="@UploadFile" ref="FileUploadRef" />
                }
                else
                {
                    <SimpleButton Clicked=@ChangeAvatarClicked Color="Color.Primary">Change Avatar</SimpleButton>
                }
            }
        </CardBody>
        </Card>
    </Column>
    <Column></Column>
    <Column></Column>
</Row>
}
