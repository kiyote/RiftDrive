@inherits ProfileComponent
@layout MainLayout
@page "/user/profile"

@if (State.Profile.User == default)
{
    <span>Loading ...</span>
}
else
{
    <Row>
        <Column ColumnSize="ColumnSize.Is4.OnDesktop.Is3.OnMobile">
            <Card Margin="Margin.Is4.OnY.Is2.OnMobile.Is5.OnDesktop">
                <CardBody>
                    <CardTitle Size="5">@State.Profile.User.Name</CardTitle>
                </CardBody>
                @if (!string.IsNullOrWhiteSpace(State.Profile.User.AvatarUrl))
                {
                    <CardImage Source=@State.Profile.User.AvatarUrl Alt="Avatar Image">
                    </CardImage>
                }
                <CardBody>
                    <CardText>
                        <TableContainer IsBordered="true" IsStriped="true">
                            <TableBody>
                                <TableRow>
                                    <TableRowCell>User Id:</TableRowCell>
                                </TableRow>
                                <TableRow>
                                    <TableRowCell>@State.Profile.User.Id.Value</TableRowCell>
                                </TableRow>
                                <TableRow>
                                    <TableRowCell>Last Login:</TableRowCell>
                                </TableRow>
                                <TableRow>
                                    <TableRowCell>@FormatDate(State.Profile.User.LastLogin)</TableRowCell>
                                </TableRow>
                            </TableBody>
                        </TableContainer>
                    </CardText>
                    @if (ChangingAvatar)
                    {
                        <input type="file" onchange="@UploadFile" ref="FileUploadRef" />
                    }
                    else
                    {
                        <SimpleButton Clicked=@ChangeAvatarClicked Color="Color.Primary">Change Avatar</SimpleButton>
                    }
                </CardBody>
            </Card>
        </Column>
    </Row>
}
